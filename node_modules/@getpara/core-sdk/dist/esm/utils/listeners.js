import "../chunk-7B52C2XE.js";
import * as constants from "../constants.js";
function storageListener(e) {
  if (!e.url.includes(window.location.origin)) {
    return;
  }
  if (e.key === constants.LOCAL_STORAGE_EXTERNAL_WALLETS) {
    this.updateExternalWalletsFromStorage();
  }
  if (e.key === constants.SESSION_STORAGE_LOGIN_ENCRYPTION_KEY_PAIR) {
    this.updateLoginEncryptionKeyPairFromStorage();
  }
  if (e.key === constants.LOCAL_STORAGE_SESSION_COOKIE) {
    this.updateSessionCookieFromStorage();
  }
  if (e.key === constants.LOCAL_STORAGE_CURRENT_WALLET_IDS) {
    this.updateWalletIdsFromStorage();
  }
  if (e.key === constants.LOCAL_STORAGE_WALLETS || e.key === constants.LOCAL_STORAGE_ED25519_WALLETS) {
    this.updateWalletsFromStorage();
  }
  if (e.key === constants.LOCAL_STORAGE_AUTH_INFO) {
    this.updateAuthInfoFromStorage();
  }
  if (e.key === constants.LOCAL_STORAGE_USER_ID) {
    this.updateUserIdFromStorage();
  }
}
function setupListeners() {
  if (typeof window !== "undefined" && window.addEventListener && window.location) {
    window.removeEventListener("storage", storageListener.bind(this));
    window.addEventListener("storage", storageListener.bind(this));
  }
}
export {
  setupListeners,
  storageListener
};
